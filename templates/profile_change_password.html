{% extends "base.html" %}
{% load static %}

{% block content %}
  <!-- Инлайн-стили для иконки смены пароля -->
  <style>
    .password-icon {
      width: 56px;
      height: 56px;
      padding: 0 !important;
      margin: 0 auto 12px !important;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: #e9f3ff;
    }
    .password-icon .bi {
      font-size: 1.8rem !important;
      color: #213160;
    }
    /* Тёмная тема */
    body.dark .password-icon {
      background: #2a2d3f !important;
    }
    body.dark .password-icon .bi {
      color: #dee1e9 !important;
    }
  </style>

  <div class="d-flex justify-content-center align-items-start" style="min-height: 72vh;">
    <form method="post" class="password-card shadow-sm"
          style="margin-top:40px; min-width:620px; max-width:390px; width:100%; background:#fff;
                 padding:2.2rem 2.1rem 1.7rem 2.1rem; border-radius:2rem;">
      {% csrf_token %}
      <div class="text-center mb-3">
        <!-- Используем специализированный класс вместо inline-padding -->
        <span class="password-icon">
          <i class="bi bi-shield-lock"></i>
        </span>
        <div class="fw-bold fs-5 mb-2">Смена пароля</div>
        <div class="text-muted small mb-1" style="font-size:1.05rem;">
          {{ request.user.username }}
        </div>
      </div>

      {% if form.errors %}
        <div class="alert alert-danger mb-2 py-2">
          {% for field in form %}
            {% for error in field.errors %}
              <div>{{ error }}</div>
            {% endfor %}
          {% endfor %}
          {% for error in form.non_field_errors %}
            <div>{{ error }}</div>
          {% endfor %}
        </div>
      {% endif %}

      <div class="mb-3">
        <label for="id_old_password" class="input-label">Старый пароль</label>
        <input type="password"
               name="old_password"
               class="form-control"
               id="id_old_password"
               required
               autocomplete="current-password"
               placeholder="Введите текущий пароль">
      </div>

      <div class="mb-3">
        <label for="id_new_password1" class="input-label">Новый пароль</label>
        <input type="password"
               name="new_password1"
               class="form-control"
               id="id_new_password1"
               required
               autocomplete="new-password"
               placeholder="Придумайте новый пароль">
      </div>

      <div class="mb-4">
        <label for="id_new_password2" class="input-label">Подтверждение нового пароля</label>
        <input type="password"
               name="new_password2"
               class="form-control"
               id="id_new_password2"
               required
               autocomplete="new-password"
               placeholder="Повторите новый пароль">
      </div>

      <button type="submit"
              class="btn-gradient"
              style="width:100%; font-size:1.11rem; padding:.81rem 0; border-radius:2.2rem;
                     background:linear-gradient(90deg,#213160 0%,#a87afe 100%); margin-top:10px;">
        Сохранить
      </button>
    </form>
  </div>
{% endblock %}
